

# Лабораторная работа №4  
## «Средства постэксплуатации»

Дисциплина: «Защита программного обеспечения защищенных автоматизированных систем»  

Выполнил: Воробьев Павел

---

## Цель работы

-разобрать работу Command&Control -фреймворков

---



## Ход работы
### 1. Описание Фреймворка 

AdaptixC2 — это расширяемая платформа для постэксплуатации и состязательной эмуляции, созданная для специалистов по тестированию на проникновение. Сервер Adaptix написан на Golang, что обеспечивает гибкость для операторов. Клиент с графическим интерфейсом написан на C++ QT, что позволяет использовать его в операционных системах Linux, Windows и MacOS.

Принцип работы в боевом режиме выглядит следующим образом:

Атакующий разворачивает team server, подключается к нему через клиент. В клиенте создается полезная нагрузка и настраивается listener, который будет ожидать входящие соединения от агентов.

Далее необходимо доставить полезную нагрузку на необходимую систему. После запуска полезной нагрузки она связывается с team server. На этом этапе атакующий может взаимодействовать с агентом через графический интерфейс клиента.

Особенности:

-Серверно-клиентская архитектура для поддержки многопользовательской игры

-Кроссплатформенный клиент с графическим интерфейсом

-Полностью зашифрованные коммуникации

-Прослушиватель и агенты в качестве плагина (расширителя)

-Хранилище задач и заданий

-Браузеры файлов и процессов

-Менеджеры учетных данных, целей и скриншотов

-Поддержка авторизации Socks4 / Socks5 / Socks55

-Поддержка локальной и обратной переадресации портов

-Поддержка BOF

-Привязка агентов и графика сеансов

-Проверка работоспособности агентов

-Контроль даты завершения работы агентов и рабочего времени агентов

-Поддержка агентов Windows /Linux/ macOS

-Удаленный терминал

-Движок AxScript

Ccылка на документацию: https://adaptix-framework.gitbook.io/adaptix-framework

---


### 2. Использование в режиме listener




### 3. Запуск сгенерированной полезной нагрузки на виртуальной машине под управлением Windows 10



#### 5.1. Анализ функции main

IDA корректно определила функцию main.
ДО ОБФУСКАЦИИ было:
<img width="934" height="872" alt="image" src="https://github.com/user-attachments/assets/2843567a-92ad-4871-a543-6ddcdd0f1f1b" />

После обфускации:

<img width="2363" height="756" alt="image" src="https://github.com/user-attachments/assets/bb0a6d0c-25fa-4a7a-8e55-ff4d3f482592" />

-Обфускация успешно скрыла исходные имена классов и методов

-Логика программы осталась прежней - функциональность не изменилась

-Код стал сложнее для анализа человеком, но сохранил свою работоспособность

-Строковые литералы остались читаемыми (не были зашифрованы)

Эффективность обфускации: невысокая. Защищает от поверхностного анализа, но не от серьезного реверс-инжиниринга.




#### 5.2. Hex-анализ

ДО ОБФУСКАЦИИ было:
<img width="1038" height="333" alt="image" src="https://github.com/user-attachments/assets/24629fd8-80d0-47ed-a457-3e64f6375d99" />


ПОСЛЕ:
<img width="1093" height="543" alt="image" src="https://github.com/user-attachments/assets/ee812561-25f9-42a8-a9d6-eae3601395b0" />


В результате были замечены измениния:

-Добавление мусорного кода: Вставлены лишние инструкции типа nop и бессмысленные переходы

-Изменение структуры потока: Добавлены лишние ветвления и переходы

---

### Вывод

Обфускация сделала код менее читаемым для человека, сохранив его работоспособность. 
